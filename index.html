<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' href='assets/stylesheets/main.css'>
    <title>SSP31 Twittler</title>
    <script src='jquery.js'></script>
    <script src='data_generator.js'></script>
    <script src='moment.js'></script>

    <script>

      function tweetUser(id) {
        var $stream = $('.tweets');
        $stream.html('');
        if (id !== undefined) {
          for (var i = streams.home.length - 1; i >= 0; i--) {
            var tweet = streams.home[i];
            if (streams.home[id].user === tweet.user) {
              var $tweet = $('<div></div>');
              var time = moment(tweet.created_at).fromNow();  
              $tweet.html('<a id=\'tweet-user\' class=\'unselectable\' onclick=\'tweetUser(' + i + ')\'>@' + tweet.user + '</a> - ' + time + '<br/><br/>' + tweet.message);
              $tweet.appendTo($stream);
            }
          }
          user(id);
          update(id);
        } else {
          for (var i = streams.home.length - 1; i >= 0; i--) {
            var tweet = streams.home[i];
            var $tweet = $('<div></div>');
            var time = moment(tweet.created_at).fromNow();
            $tweet.html('<a id=\'tweet-user\' class=\'unselectable\' onclick=\'tweetUser(' + i + ')\'>@' + tweet.user + '</a> - ' + time + '<br/><br/>' + tweet.message);
            $tweet.appendTo($stream);
          }
          user();
          update();
        }
      }

      function user(id) {
        var $username = $('.user');
        $username.html('');
        var $user = $('<div></div>');
        var user_descript = '';
        if (id !== undefined) {
          $user.html('@' + streams.home[id].user + '<br/><br/>' + user_descript);
        } else {
          user_descript = 'new user to twittler';
          $user.html('@user1'+ '<br/><br/>' + user_descript);
        }
        $user.appendTo($username);
      }

      function update(id) {
        var $list = $('#update');
        $list.html('');
        var $update = $('<li></li>');
        if (id !== undefined) {
          $update.html('<a href=javascript:tweetUser(' + id + ')> Update </a>');
        } else {
          $update.html('<a href=javascript:tweetUser()> Update </a>');
        }
        $update.appendTo($list);
      }

    </script>
  </head>
  <body>
    <script>

      $(document).ready(function(){

        tweetUser();


      });

    </script>


    <header class='header container'>
      <nav class='nav'>
        <ul>
          <li><a id='home' class='unselectable' onclick='tweetUser()'><img class='logo' src='assets\images\logo.png' alt='logo' />   Home</a></li>
        </ul>
      </nav>
    </header>

    <img class='banner' src='assets\images\banner.jpg' alt='banner' />

    <section class='container'><!-- 

      --><div class='grid user'>
      </div><!-- 

       --><div class='grid stream'>

        <nav class='nav tweets-title'>
          <ul>
            <li> Tweets </li>
            <li id='update'></li>
          </ul>
        </nav>

        <div class='tweets'>
        </div>

      </div>

    </section>

  </body>
</html>
